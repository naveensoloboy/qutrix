<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="style/register-style.css">
    <title>Event Registration</title>
</head>

<body>

    <div class="container" id="container">
        <div class="form-container sign-up" style="background-color: #d4e7f0; height: auto; border-radius: 30px;">
            <form action="event_registration.php" method="post" enctype="multipart/form-data">

                <h1>Register Here<a href="card.html"><i class="fa-solid fa-xmark l"></i></a></h1>
                <h5 style="color: red;">* is mandatory</h5>
                <label for="collegename"><span>College Name:</span><span class="star">*</span></label>
                <input type="text" id="collegename" name="collegename" placeholder="Enter College Name" required>

                <label for="department"><span>Department:</span><span class="star">*</span></label>
                <select id="department" name="department" required>
                    <option value="">Select Department</option>
                    <option value="B.Sc. Computer Science">B.Sc. Computer Science</option>
                    <option value="B.Sc. Computer Technology">B.Sc. Computer Technology</option>
                    <option value="B.Sc. Information Technology">B.Sc. Information Technology</option>
                    <option value="B.Sc. Datascience">B.Sc. Datascience</option>
                    <option value="B.Sc. Artificial Intelligence">B.Sc. Artificial Intelligence</option>
                    <option value="BCA">BCA</option>
                    <option value="MCA">MCA</option>
                    <option value="M.Sc. Computer Science">M.Sc. Computer Science</option>
                    <option value="M.Sc. Computer Technology">M.Sc. Computer Technology</option>
                    <option value="M.Sc. Information Technology">M.Sc. Information Technology</option>
                    <option value="Others">Others</option>
                </select>

                <div id="other-department" style="display: none;">
                    <label for="other_department_name"><span>Please specify your department:</span><span class="star">*</span></label>
                    <input type="text" id="other_department_name" name="other_department" placeholder="Enter Department Name">
                </div>

                <label for="event">* Event:<span class="star">*</span></label>
                <div>
                    <div class="ppdiv">
                        <input type="checkbox" name="event[]" id="checkbox1" value="PAPER PRESENTATION">
                        <label for="checkbox1">PAPER PRESENTATION</label>
                    </div>
                    <br>
                    <div class="wddiv">
                        <input type="checkbox" name="event[]" id="checkbox4" value="WEB DESIGN">
                        <label for="checkbox4">WEB DESIGN</label>
                    </div>
                    <br>
                    <div class="scdiv">
                        <input type="checkbox" name="event[]" id="checkbox5" value="SOFTWARE CONTEST">
                        <label for="checkbox5">SOFTWARE CONTEST</label>
                    </div>
                    <br>
                    <div class="mdiv">
                        <input type="checkbox" name="event[]" id="checkbox6" value="MARKETING">
                        <label for="checkbox6">MARKETING</label>
                    </div>
                    <br>
                    <div class="qdiv">
                        <input type="checkbox" name="event[]" id="checkbox2" value="QUIZ">
                        <label for="checkbox2">QUIZ</label>
                    </div>
                    <br>
                    <div class="whdiv">
                        <input type="checkbox" name="event[]" id="checkbox3" value="WORD HUNT">
                        <label for="checkbox3">WORD HUNT</label>
                    </div>
                    <br>
                    <div class="ntdiv">
                        <input type="checkbox" name="event[]" id="checkbox7" value="NON TECHNICAL ROUND DANCING">
                        <label for="checkbox7">DANCE (NON TECHNICAL ROUND)</label>
                    </div>
                    <br>
                    
                    <div id="event-message" style="color: red;"></div>
                    <br>
                </div>

                <label for="firstmembername"><span>First Member Name:</span><span class="star">*</span></label>
                <input type="text" id="firstmembername" name="firstmembername" placeholder="First Member Name" required>

                <label for="firstmemberrno"><span>First Member Roll No.:</span><span class="star">*</span></label>
                <input type="text" id="firstmemberrno" name="firstmemberrno" placeholder="First Member Roll No." required>

                <label for="first_member_bonafide">First Member Bonafide Image:</label>
                <input type="file" id="first_member_bonafide" name="first_member_bonafide" accept="image/*">
                <p id="first-file-size-warning" style="color: red; display: none;">File size exceeds 900 KB!</p>

                <label for="secondmembername"><span>Second Member Name:</span><span class="star">*</span></label>
                <input type="text" id="secondmembername" name="secondmembername" placeholder="Second Member Name" required>

                <label for="secondmemberrno"><span>Second Member Roll No.:</span><span class="star">*</span></label>
                <input type="text" id="secondmemberrno" name="secondmemberrno" placeholder="Second Member Roll No." required>

                <label for="second_member_bonafide">Second Member Bonafide Image:</label>
                <input type="file" id="second_member_bonafide" name="second_member_bonafide" accept="image/*">
                <p id="second-file-size-warning" style="color: red; display: none;">File size exceeds 900 KB!</p>

                <div id="third-member-section" style="display: none;">
                    <label for="thirdmembername">Third Member Name:</label>
                    <!-- <p style="font-size: 10px;">This field is only for PAPER PRESENTATION, MARKETING, AND NON TECHNICAL ROUND DANCING</p> -->
                    <input type="text" id="thirdmembername" name="thirdmembername" placeholder="Third Member Name">

                    <label for="thirdmemberrno">Third Member Roll No.:</label>
                    <input type="text" id="thirdmemberrno" name="thirdmemberrno" placeholder="Third Member Roll No.">

                    <label for="third_member_bonafide">Third Member Bonafide Image:</label>
                    <input type="file" id="third_member_bonafide" name="third_member_bonafide" accept="image/*">
                    <p id="third-file-size-warning" style="color: red; display: none;">File size exceeds 900 KB!</p>
                </div>

                <div id="fourth-member-section" style="display: none;">
                    <label for="fourthmembername">Fourth Member Name:</label>
                    <!-- <p style="font-size: 10px;">This field is only for NON TECHNICAL ROUND DANCING</p> -->
                    <input type="text" id="fourthmembername" name="fourthmembername" placeholder="Fourth Member Name">

                    <label for="fourthmemberrno">Fourth Member Roll No.:</label>
                    <input type="text" id="fourthmemberrno" name="fourthmemberrno" placeholder="Fourth Member Roll No.">

                    <label for="fourth_member_bonafide">Fourth Member Bonafide Image:</label>
                    <input type="file" id="fourth_member_bonafide" name="fourth_member_bonafide" accept="image/*">
                    <p id="fourth-file-size-warning" style="color: red; display: none;">File size exceeds 900 KB!</p>
                </div>

                <label for="phoneno"><span>Phone No. :</span><span class="star">*</span></label>
                <input type="tel" id="phoneno" name="phoneno" pattern="[0-9]{10}" placeholder="Phone No." required>

                <label for="altphoneno">Alternate Phone No. :</label>
                <input type="tel" id="altphoneno" name="altphoneno" pattern="[0-9]{10}" placeholder="Alternative Phone No.">

                <label for="email"><span>Email:</span><span class="star">*</span></label>
                <input type="email" id="email" name="email" placeholder="Email" required>

                <div class="btndiv">
                    <button type="submit" class="submitbtn">Register</button>
                    <button type="reset" class="resetbtn">Reset</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Function to show/hide the "Other Department Name" input based on selected department
        function toggleOtherDepartment() {
            const departmentSelect = document.getElementById('department');
            const otherDepartmentInput = document.getElementById('other-department');
            const otherDepartmentNameInput = document.getElementById('other_department_name');

            if (departmentSelect.value === 'Others') {
                otherDepartmentInput.style.display = 'block';
                otherDepartmentNameInput.setAttribute('required', 'required');
            } else {
                otherDepartmentInput.style.display = 'none';
                otherDepartmentNameInput.removeAttribute('required');
            }
        }

        document.getElementById('department').addEventListener('change', toggleOtherDepartment);

        // Function to handle event selection and related member fields visibility
        function handleEventSelection() {
            const eventCheckboxes = document.querySelectorAll('input[name="event[]"]');
            const eventMessage = document.getElementById('event-message');
            const firstMemberField = document.getElementById('firstmembername');
            const secondMemberField = document.getElementById('secondmembername');
            const secondMemberRollNoField = document.getElementById('secondmemberrno');
            const thirdMemberSection = document.getElementById('third-member-section');
            const fourthMemberSection = document.getElementById('fourth-member-section');
            let selectedEvents = [];

            // Collect selected events
            eventCheckboxes.forEach((checkbox) => {
                if (checkbox.checked) {
                    selectedEvents.push(checkbox.value);
                }
            });

            // Display or hide member fields based on selected event
            if (selectedEvents.includes('NON TECHNICAL ROUND DANCING')) {
                secondMemberField.removeAttribute('required');
                secondMemberRollNoField.removeAttribute('required');
                thirdMemberSection.style.display = 'block';
                fourthMemberSection.style.display = 'block';
            } else {
                fourthMemberSection.style.display = 'none';
                secondMemberField.setAttribute('required', 'required');
            }

            if (selectedEvents.includes('PAPER PRESENTATION') || selectedEvents.includes('MARKETING') || selectedEvents.includes('NON TECHNICAL ROUND DANCING')) {
                thirdMemberSection.style.display = 'block';
            } else {
                thirdMemberSection.style.display = 'none';
            }

            // Show warning message if more than one event is selected
            if (selectedEvents.length > 1) {
                eventMessage.textContent = "You can select only one event at a time.";
                eventCheckboxes.forEach((checkbox) => {
                    checkbox.checked = false;
                });
                thirdMemberSection.style.display = 'none';
                fourthMemberSection.style.display = 'none';
                selectedEvents = [];
            } else {
                eventMessage.textContent = "";
            }
        }

        // Add event listener to event checkboxes
        document.querySelectorAll('input[name="event[]"]').forEach((checkbox) => {
            checkbox.addEventListener('change', handleEventSelection);
        });

        // Function to handle file size validation
        function validateFileSize(inputElement, warningElementId) {
            const maxSize = 900 * 1024; // 900 KB in bytes
            const warningElement = document.getElementById(warningElementId);

            if (inputElement.files[0].size > maxSize) {
                warningElement.style.display = 'block';
            } else {
                warningElement.style.display = 'none';
            }
        }

        document.getElementById('first_member_bonafide').addEventListener('change', function () {
            validateFileSize(this, 'first-file-size-warning');
        });

        document.getElementById('second_member_bonafide').addEventListener('change', function () {
            validateFileSize(this, 'second-file-size-warning');
        });

        document.getElementById('third_member_bonafide').addEventListener('change', function () {
            validateFileSize(this, 'third-file-size-warning');
        });

        document.getElementById('fourth_member_bonafide').addEventListener('change', function () {
            validateFileSize(this, 'fourth-file-size-warning');
        });
    </script>
</body>

</html>
